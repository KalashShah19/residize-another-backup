@* @{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div> *@
<!DOCTYPE html>
<html>

<head>
    <title>Property Distribution</title>
    <!-- Load jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    @* <script src="https://kendo.cdn.telerik.com/2023.3.1010/js/kendo.all.min.js"></script>
    <link href="https://kendo.cdn.telerik.com/2023.3.1010/styles/kendo.default-v2.min.css" rel="stylesheet"> *@
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2021.2.616/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2021.2.616/styles/kendo.default.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2021.2.616/js/kendo.all.min.js"></script>
</head>

<body>

    <div class="demo-section wide">
        <div id="donut-chart"></div>
    </div>

    <script>
        function createChart() {
            // Sample data
            var data = [
                {
                    "name": "Caesar Salad",
                    "price": 7.5,
                    "image": "/images/salad.jpg",
                    "category": "Salad",
                    "description": "Fresh romaine lettuce with Caesar dressing.",
                    "featured": true
                },
                {
                    "name": "Margherita Pizza",
                    "price": 12.99,
                    "image": "/images/salad.jpg",
                    "category": "Pizza",
                    "description": "Classic Italian pizza with fresh mozzarella and basil.",
                    "featured": false
                }
            ];

            // Process the data to aggregate prices by category
            var categoryData = {};
            data.forEach(function (item) {
                if (!categoryData[item.category]) {
                    categoryData[item.category] = 0;
                }
                categoryData[item.category] += item.price;
            });

            // Format the data for the chart
            var chartData = Object.keys(categoryData).map(function (category) {
                return {
                    category: category,
                    sales: categoryData[category]
                };
            });

            // Create the donut chart
            $("#donut-chart").kendoChart({
                dataSource: {
                    data: chartData
                },
                title: {
                    position: "top",
                    text: "Sales by Category",
                    margin: { bottom: 25 }
                },
                legend: {
                    visible: true
                },
                chartArea: {
                    background: "transparent"
                },
                seriesColors: ["#166f99", "#2185b4", "#319fd2", "#3eaee2", "#89CFF0", "#B0DFE5"],
                seriesDefaults: {
                    type: "donut",
                    startAngle: 300
                },
                series: [{
                    field: "sales",
                    categoryField: "category",
                    labels: {
                        visible: true,
                        position: "outsideEnd",
                        background: "transparent",
                        template: "#= category #: \n #= value#"
                    }
                }],
                tooltip: {
                    visible: true,
                    template: "#= category #: #= value"
                }
            });
        }

        $(document).ready(function () {
            createChart();
            setDonutChartLabelsPosition();
        });

        function setDonutChartLabelsPosition() {
            var donutChart = $("#donut-chart").data("kendoChart");
            var donutSeries = donutChart.options.series;
            if ($(window).width() <= 716) {
                donutSeries[0].labels.position = "center";
                donutChart.setOptions({
                    series: donutSeries
                });
            } else {
                donutSeries[0].labels.position = "outsideEnd";
                donutChart.setOptions({
                    series: donutSeries
                });
            }
        }

        $(window).on("resize", function () {
            setDonutChartLabelsPosition();
        });
    </script>

</body>

</html>
